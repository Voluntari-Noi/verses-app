<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Title here</title>
  <meta name="description" content="Description here">
</head>

<body>
  <h1>App</h1>

  <div id="exercise-container">
    Lorem ipsum dolor sit amet
  </div>

  <p id="info-level">Level <span>1</span></p>
  <p id="info-points"><span>0</span> points</p>
  <button id="fail">Fail</button>
  <button id="some-experience">Success</button>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

  <script>
    $("document").ready(function() {
      // Init game
      var current_level = 1;
      var experience_points = 0;
      var number_of_levels = 5;
      var points_per_level = 5;


      // Definition of exercises types
      var exercises_types = {
        'ID001': {
          'title': 'Exercise type A',
          'description': 'Solve the exercise bla bla aaaa',
          'points': 3,
        },
        'ID002': {
          'title': 'Exercise type B',
          'description': 'Solve the exercise bla bla bbbbbbbbbbbbbb',
          'points': 5,
        },
        'ID003': {
          'title': 'Exercise type C',
          'description': 'Solve the exercise bla bla cccccccc',
          'points': 7,
        },
      }

      // Definition of levels
      var levels = {
        1: {
          'exercises_types': ['ID001']
        },
        2: {
          'exercises_types': ['ID001', 'ID002']
        },
        3: {
          'exercises_types': ['ID001', 'ID002', 'ID003']
        },
        4: {
          'exercises_types': ['ID003']
        },
        5: {
          'exercises_types': ['ID001', 'ID002', 'ID003']
        },
      }

      function refresh_texts() {
        // Update experience points and current level
        $("p#info-points span").text(experience_points);
        $("p#info-level span").text(current_level);
      }

      function game_over() {
        // You won!
        alert("You won the game. Congrats!");
        $("button#some-experience").hide();
        $("button#fail").hide();
      }

      function new_level() {
        // New level
        alert("New level. Yey!");
      }

      function update_progress(event) {
        var points = event.data.points;

        // Update the experience points, check levels
        experience_points += points;

        if(experience_points >= number_of_levels * points_per_level) {
          game_over();
        } else {
          if(experience_points % points_per_level === 0) {
            current_level += 1;
            new_level();
          }
        }

        refresh_texts();
      }

      function fail() {
        // When there is no progress
        alert("Wrong answer.");
      }

      // These are for testing:

      // In case of success:
      $("button#some-experience").on("click", {points: 1}, update_progress);

      // In case of fail:
      $("button#fail").on("click", fail);
    });
  </script>
</body>
</html>
